<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Electoral - Impacto de Reformas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <div class="root">
        <!-- Header -->
        <div class="header-section">
            <div class="header-content">
                <div class="header-title">Reforma Electoral</div>
            </div>
            <div class="header-date">Fecha de corte: 18-08-2025</div>
        </div>

        <!-- Layout Container -->
        <div class="layout-container">
            <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Abrir panel de control">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M3 5h14M3 10h14M3 15h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            
            <!-- Control Sidebar -->
        <div class="control-sidebar" id="control-sidebar">
            <div class="sidebar-header">
                <h3 class="sidebar-title">Panel de Control</h3>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Contraer panel">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M3 7h10l-3-3m0 6l3-3"/>
                    </svg>
                </button>
            </div>
            
            <div class="sidebar-content">
                <!-- Grupo: Básico -->
                <div class="control-group" data-group="basic">
                    <button class="group-toggle" data-target="basic">
                        <span class="group-title">Configuración Básica</span>
                        <svg class="chevron" width="12" height="12" viewBox="0 0 12 12">
                            <path d="M4 2l4 4-4 4" stroke="currentColor" stroke-width="1.5" fill="none"/>
                        </svg>
                    </button>
                    <div class="group-content expanded" id="group-basic">
                        <!-- Total Escaños -->
                        <div class="control-item">
                            <label class="control-label" title="Total de escaños en la cámara">
                                Escaños Totales
                                <span class="control-value" id="magnitude-display">128</span>
                            </label>
                            <input type="range" class="control-slider" id="input-magnitud" min="1" max="700" value="128">
                        </div>
                        
                        <!-- Validación de Escaños -->
                        <div class="validation-message hidden" id="seats-validation">
                            La suma debe ser igual al total de escaños
                        </div>
                        
                        <!-- Coaliciones -->
                        <div class="control-item">
                            <label class="control-label" title="Usar coaliciones para distribución">Coaliciones</label>
                            <div class="control-toggle" id="coalition-toggle" data-state="on">
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Grupo: Reglas Electorales -->
                <div class="control-group" data-group="rules">
                    <button class="group-toggle" data-target="rules">
                        <span class="group-title">Reglas Electorales</span>
                        <svg class="chevron" width="12" height="12" viewBox="0 0 12 12">
                            <path d="M4 2l4 4-4 4" stroke="currentColor" stroke-width="1.5" fill="none"/>
                        </svg>
                    </button>
                    <div class="group-content expanded" id="group-rules">
                        <!-- Tipo de Regla -->
                        <div class="control-item">
                            <label class="control-label">
                                Tipo de Regla
                                <span class="help-icon tooltip" data-tooltip="Define el sistema electoral: MR (Mayoría Relativa), RP (Representación Proporcional) o Mixto">?</span>
                            </label>
                            <div class="segmented-control" id="rule-type">
                                <button class="segment" data-value="mr">MR</button>
                                <button class="segment" data-value="rp">RP</button>
                                <button class="segment active" data-value="mixto">Mixto</button>
                            </div>
                        </div>

                        <!-- Escaños MR/RP (visible cuando Mixto) -->
                        <div class="control-item mixto-controls" id="mixto-controls">
                            <label class="control-label">
                                Distribución de Escaños
                                <span class="help-icon tooltip" data-tooltip="Distribuye los escaños entre Mayoría Relativa (MR) y Representación Proporcional (RP)">?</span>
                            </label>
                            <div class="dual-slider">
                                <div class="slider-group">
                                    <label class="slider-label">MR <span id="mr-value">64</span></label>
                                    <input type="range" class="control-slider" id="input-mr" min="0" max="128" value="64">
                                </div>
                                <div class="slider-group">
                                    <label class="slider-label">RP <span id="rp-value">64</span></label>
                                    <input type="range" class="control-slider" id="input-rp" min="0" max="128" value="64">
                                </div>
                            </div>
                        </div>

                        <!-- Método -->
                        <div class="control-item">
                            <label class="control-label">Método</label>
                            <select class="control-select" id="quota-method">
                                <option value="hare">Hare</option>
                                <option value="droop">Droop</option>
                                <option value="dhondt">D'Hondt</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Grupo: Umbrales -->
                <div class="control-group" data-group="thresholds">
                    <button class="group-toggle" data-target="thresholds">
                        <span class="group-title">Umbrales</span>
                        <svg class="chevron" width="12" height="12" viewBox="0 0 12 12">
                            <path d="M4 2l4 4-4 4" stroke="currentColor" stroke-width="1.5" fill="none"/>
                        </svg>
                    </button>
                    <div class="group-content" id="group-thresholds">
                        <!-- Umbral Principal -->
                        <div class="control-item">
                            <div class="control-header">
                                <label class="control-label">Umbral de Inclusión</label>
                                <div class="control-toggle" id="threshold-toggle" data-state="on">
                                    <span class="toggle-slider"></span>
                                </div>
                            </div>
                            <div class="threshold-controls" id="threshold-controls">
                                <div class="segmented-control">
                                    <button class="segment active" data-value="national">Nacional</button>
                                    <button class="segment" data-value="state">Estatal</button>
                                </div>
                                <div class="slider-with-input">
                                    <input type="range" class="control-slider" id="threshold-slider" min="0" max="20" step="0.1" value="3">
                                    <input type="number" class="control-input" id="threshold-input" min="0" max="20" step="0.1" value="3">
                                    <span class="input-suffix">%</span>
                                </div>
                            </div>
                        </div>

                        <!-- Sobrerrepresentación (solo Diputados) -->
                        <div class="control-item deputy-only" id="overrep-controls">
                            <label class="control-label" title="Límite de sobrerrepresentación">
                                Sobrerrepresentación
                                <span class="control-value" id="overrep-display">8%</span>
                            </label>
                            <input type="range" class="control-slider" id="overrep-slider" min="0" max="20" step="0.1" value="8">
                        </div>
                    </div>
                </div>

                <!-- Grupo: Ajustes de Votación -->
                <div class="control-group" data-group="voting">
                    <button class="group-toggle" data-target="voting">
                        <span class="group-title">Ajustes de Votación</span>
                        <svg class="chevron" width="12" height="12" viewBox="0 0 12 12">
                            <path d="M4 2l4 4-4 4" stroke="currentColor" stroke-width="1.5" fill="none"/>
                        </svg>
                    </button>
                    <div class="group-content" id="group-voting">
                        <!-- Shocks Compactos -->
                        <div class="control-item">
                            <label class="control-label">Shocks por Partido (%)</label>
                            <div class="compact-shocks">
                                <div class="shock-row">
                                    <span class="party-tag morena">MORENA</span>
                                    <input type="number" class="shock-input" id="shock-morena" min="-20" max="20" step="0.1" value="0">
                                </div>
                                <div class="shock-row">
                                    <span class="party-tag pan">PAN</span>
                                    <input type="number" class="shock-input" id="shock-pan" min="-20" max="20" step="0.1" value="0">
                                </div>
                                <div class="shock-row">
                                    <span class="party-tag pri">PRI</span>
                                    <input type="number" class="shock-input" id="shock-pri" min="-20" max="20" step="0.1" value="0">
                                </div>
                                <div class="shock-row">
                                    <span class="party-tag pt">PT</span>
                                    <input type="number" class="shock-input" id="shock-pt" min="-20" max="20" step="0.1" value="0">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Dashboard Header -->
            <div class="dashboard-title">
                <div class="title-content">
                    <div class="title-header">
                        <div class="spacer"></div>
                        <div class="main-title">Herramienta de Simulación Electoral</div>
                    </div>
                    <div class="chamber-tabs" role="tablist" aria-label="Selección de cámara">
                        <div class="tab-button" data-state="Active" role="tab" aria-selected="false" tabindex="0">
                            <div>Cámara de diputados</div>
                        </div>
                        <div class="tab-button active" data-state="Default" role="tab" aria-selected="true" tabindex="0">
                            <div>Cámara de senadores</div>
                        </div>
                    </div>
                    <div class="controls-row">
                        <div class="control-group">
                            <div class="control-label">Año</div>
                            <div class="control-pills" role="radiogroup" aria-label="Selección de año">
                                <div class="pill-button active" role="radio" aria-checked="true" tabindex="0">2018</div>
                                <div class="pill-button" role="radio" aria-checked="false" tabindex="0">2021</div>
                                <div class="pill-button" role="radio" aria-checked="false" tabindex="0">2024</div>
                            </div>
                        </div>
                        <div class="control-group right-align">
                            <div class="control-label">Modelo</div>
                            <div class="control-pills" role="radiogroup" aria-label="Selección de modelo">
                                <div class="pill-button" role="radio" aria-checked="false" tabindex="0">Vigente</div>
                                <div class="pill-button" role="radio" aria-checked="false" tabindex="0">Plan A</div>
                                <div class="pill-button" role="radio" aria-checked="false" tabindex="0">Plan C</div>
                                <div class="pill-button active" role="radio" aria-checked="true" tabindex="0">Personalizado</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chamber Composition -->
        <div class="chamber-composition">
            <div class="composition-title">Composición de la Cámara de Senadores</div>
            <div class="composition-container">
                <div class="composition-content">
                    <div class="seat-map" role="img" aria-label="Distribución de escaños en la Cámara de Senadores">
                        <div class="seat-grid">
                            <!-- Las filas se generarán dinámicamente con JavaScript -->
                        </div>
                    </div>
                    
                    <div class="results-panel">
                        <div class="results-title">Resultados por partido</div>
                        <div class="party-results">
                            <div class="party-result">
                                <div class="party-color" style="background: #8B2231;"></div>
                                <div class="party-name">MORENA</div>
                                <div class="party-stats">
                                    <div class="party-seats">69 escaños</div>
                                    <div class="party-percentage">53.9%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #0055A5;"></div>
                                <div class="party-name">PAN</div>
                                <div class="party-stats">
                                    <div class="party-seats">22 escaños</div>
                                    <div class="party-percentage">17.2%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #0D7137;"></div>
                                <div class="party-name">PRI</div>
                                <div class="party-stats">
                                    <div class="party-seats">16 escaños</div>
                                    <div class="party-percentage">12.5%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #D52B1E;"></div>
                                <div class="party-name">PT</div>
                                <div class="party-stats">
                                    <div class="party-seats">8 escaños</div>
                                    <div class="party-percentage">6.3%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #5CE23D;"></div>
                                <div class="party-name">PVEM</div>
                                <div class="party-stats">
                                    <div class="party-seats">6 escaños</div>
                                    <div class="party-percentage">4.7%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #F58025;"></div>
                                <div class="party-name">MC</div>
                                <div class="party-stats">
                                    <div class="party-seats">4 escaños</div>
                                    <div class="party-percentage">3.1%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #FFCC00;"></div>
                                <div class="party-name">PRD</div>
                                <div class="party-stats">
                                    <div class="party-seats">3 escaños</div>
                                    <div class="party-percentage">2.3%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Key Indicators -->
        <div class="key-indicators">
            <div class="indicators-header">
                <div class="indicators-title">Indicadores</div>
                <div class="indicators-grid">
                    <div class="indicator-card total-seats">
                        <div class="indicator-header single">
                            <div class="indicator-title">Total de escaños por partido</div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value">128</div>
                        </div>
                        <div class="indicator-change">Senadores</div>
                    </div>
                    
                    <div class="indicator-card votes-vs-seats">
                        <div class="indicator-header">
                            <div class="indicator-title">% votos vs % escaños</div>
                            <div class="info-icon">
                                <div class="info-dot"></div>
                                <div class="info-dot"></div>
                                <div class="info-dot"></div>
                            </div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value">±2.1%</div>
                        </div>
                        <div class="indicator-change">Diferencia promedio</div>
                    </div>

                    <div class="indicator-card gallagher-index">
                        <div class="indicator-header">
                            <div class="indicator-title">Índice de Gallagher</div>
                            <div class="info-icon">
                                <div class="info-dot"></div>
                                <div class="info-dot"></div>
                                <div class="info-dot"></div>
                            </div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value large">5.2</div>
                        </div>
                        <div class="indicator-change small">Global y por cámara</div>
                    </div>

                    <div class="indicator-card total-votes">
                        <div class="indicator-header single">
                            <div class="indicator-title">Totales del Sistema</div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value">60.1M</div>
                        </div>
                        <div class="indicator-change">Votos totales</div>
                    </div>

                    <div class="indicator-card thresholds">
                        <div class="indicator-header single">
                            <div class="indicator-title">Umbral de inclusión</div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value">3%</div>
                        </div>
                        <div class="indicator-change">Nacional aplicado</div>
                    </div>

                    <div class="indicator-card representation-threshold">
                        <div class="indicator-header single">
                            <div class="indicator-title">Umbral de representación</div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value">8pp</div>
                        </div>
                        <div class="indicator-change">Cláusula aplicada</div>
                    </div>
                </div>
            </div>
        </div>
        
        </div> <!-- End layout-container -->
    </div>
</body>
</html>
